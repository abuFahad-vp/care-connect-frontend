<script>
    import Background from "../Background.svelte";
    import { pageData } from "./page_state.svelte";
    import ReportPage from "./ReportPage.svelte";
    import Slider from "./Slider.svelte";
    import UserView from "./UserView.svelte";
    import AdminProfile from "./AdminProfile.svelte";
    import TaskRecords from "./TaskRecords.svelte";

    const pages = [ReportPage, UserView, TaskRecords, AdminProfile];

</script>
<div class="app-container">
    <header class="header">
        <h1>CareConnect</h1>
        <svg fill="#ffffff" width="30px" height="30px" viewBox="0 0 32 32" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" version="1.1" xml:space="preserve">
            <path d="M4.234,6.266c-1.409,1.45 -2.202,3.415 -2.202,5.464c-0,2.05 0.793,4.015 2.202,5.464l9.625,9.899c0.568,0.584 1.339,0.91 2.143,0.91c0.803,0 1.575,-0.326 2.143,-0.91c1.743,-1.793 9.617,-9.907 9.617,-9.907c1.409,-1.449 2.202,-3.414 2.202,-5.464c0,-2.05 -0.793,-4.014 -2.202,-5.464c-0,0 -0,0 -0,0c-1.419,-1.459 -3.345,-2.277 -5.352,-2.277c-2.007,-0 -3.932,0.818 -5.351,2.277c-0,0 -1.065,1.095 -1.065,1.095c0,0 -1.057,-1.087 -1.057,-1.087c-1.419,-1.459 -3.344,-2.277 -5.351,-2.277c-2.007,0 -3.933,0.818 -5.352,2.277m1.434,1.395c1.039,-1.069 2.448,-1.672 3.918,-1.672c1.47,0 2.878,0.603 3.917,1.672c0,-0 1.774,1.824 1.774,1.824c0.188,0.193 0.447,0.303 0.717,0.303c0.27,-0 0.529,-0.11 0.717,-0.303l1.782,-1.833c1.039,-1.068 2.447,-1.671 3.917,-1.671c1.47,-0 2.878,0.603 3.918,1.671c0.003,0.004 0.006,0.007 0.01,0.011c1.039,1.069 1.626,2.533 1.626,4.059c0,1.526 -0.587,2.991 -1.636,4.07c-0,-0 -7.874,8.114 -9.617,9.907c-0.188,0.193 -0.443,0.304 -0.709,0.304c-0.266,0 -0.521,-0.111 -0.709,-0.304l-9.625,-9.899c-1.049,-1.079 -1.636,-2.544 -1.636,-4.07c-0,-1.526 0.587,-2.99 1.636,-4.069"/>
            <path d="M14.998,15.003l-1.997,-0c-0.552,-0 -1,0.448 -1,1c0,0.552 0.448,1 1,1l1.997,-0l-0,1.997c-0,0.552 0.448,1 1,1c0.552,-0 1,-0.448 1,-1l-0,-1.997l1.997,-0c0.552,-0 1,-0.448 1,-1c-0,-0.552 -0.448,-1 -1,-1l-1.997,-0l-0,-1.997c-0,-0.552 -0.448,-1 -1,-1c-0.552,0 -1,0.448 -1,1l-0,1.997Z"/>
        </svg>
    </header>

    <Background z_index={1}/>

    <main class="main-content">
        <Slider {pages}/>
    </main>

    <div class="nav-div">
        <nav class="nav-bar">
            <button class="nav-button" onclick={(e) => {pageData.currentPageIndex = 0}} class:active={pageData.currentPageIndex === 0}>
                <svg class="nav-icon" fill="#000000" version="1.1" id="Layer_1" viewBox="0 0 297.001 297.001" xml:space="preserve">
                    <g>
                        <g>
                            <g>
                                <path d="M178.138,152.609c-29.565,0-53.617,24.052-53.617,53.617s24.052,53.617,53.617,53.617s53.618-24.052,53.618-53.617     S207.701,152.609,178.138,152.609z M178.138,240.193c-18.729,0-33.967-15.238-33.967-33.967c0-5.797,1.463-11.258,4.034-16.037     l22.985,22.985c1.843,1.842,4.342,2.878,6.948,2.878h32.513C206.425,230.004,193.451,240.193,178.138,240.193z M182.208,196.401     L162.1,176.293c4.78-2.571,10.241-4.034,16.037-4.034c15.315,0,28.289,10.189,32.514,24.142H182.208z"/>
                                <path d="M235.993,29.194h-28.268c-3.455-8.548-11.835-14.598-21.606-14.598H170.86C167.071,6.009,158.475,0,148.501,0     s-18.57,6.009-22.359,14.597h-15.259c-9.771,0-18.152,6.05-21.606,14.598H61.009c-13.517,0-24.515,10.998-24.515,24.515v218.777     c0,13.517,10.998,24.514,24.515,24.514h174.984c13.517,0,24.515-10.997,24.515-24.514V53.709     C260.508,40.192,249.51,29.194,235.993,29.194z M107.234,37.895L107.234,37.895c0.001-2.011,1.638-3.648,3.649-3.648h23.02     c5.426,0,9.825-4.399,9.825-9.825c0-2.631,2.141-4.772,4.772-4.772s4.772,2.141,4.772,4.772c0,5.426,4.399,9.825,9.825,9.825     h23.02c2.011,0,3.648,1.637,3.648,3.648v16.847c0,2.011-1.637,3.648-3.648,3.648h-75.235c-2.011,0-3.648-1.637-3.648-3.648     V37.895z M235.993,277.35H61.009c-2.683,0-4.865-2.182-4.865-4.864V53.709c0-2.683,2.182-4.865,4.865-4.865h26.576v5.897     c0,12.847,10.452,23.298,23.298,23.298h75.235c12.847,0,23.298-10.452,23.298-23.298v-5.897h26.576     c2.683,0,4.865,2.182,4.865,4.865v218.777h0.001C240.857,275.168,238.675,277.35,235.993,277.35z"/>
                                <path d="M75.514,113.869h72.987c5.426,0,9.825-4.399,9.825-9.825c0-5.426-4.399-9.825-9.825-9.825H75.514     c-5.426,0-9.825,4.399-9.825,9.825C65.688,109.47,70.087,113.869,75.514,113.869z"/>
                                <path d="M75.514,143.064h43.793c5.426,0,9.825-4.399,9.825-9.825c0-5.426-4.399-9.825-9.825-9.825H75.514     c-5.426,0-9.825,4.399-9.825,9.825C65.688,138.665,70.087,143.064,75.514,143.064z"/>
                                <path d="M129.131,162.434c0-5.426-4.399-9.825-9.825-9.825H75.514c-5.426,0-9.825,4.399-9.825,9.825     c0,5.426,4.399,9.825,9.825,9.825h43.793C124.733,172.259,129.131,167.86,129.131,162.434z"/>
                            </g>
                        </g>
                    </g>
                </svg>
                Reports
            </button>
            <button class="nav-button" onclick={(e) => {pageData.currentPageIndex = 1}} class:active={pageData.currentPageIndex === 1}>
                <svg class="nav-icon" fill="#000000"  viewBox="0 0 80.13 80.13" xml:space="preserve">
                    <g>
                        <path d="M48.355,17.922c3.705,2.323,6.303,6.254,6.776,10.817c1.511,0.706,3.188,1.112,4.966,1.112   c6.491,0,11.752-5.261,11.752-11.751c0-6.491-5.261-11.752-11.752-11.752C53.668,6.35,48.453,11.517,48.355,17.922z M40.656,41.984   c6.491,0,11.752-5.262,11.752-11.752s-5.262-11.751-11.752-11.751c-6.49,0-11.754,5.262-11.754,11.752S34.166,41.984,40.656,41.984   z M45.641,42.785h-9.972c-8.297,0-15.047,6.751-15.047,15.048v12.195l0.031,0.191l0.84,0.263   c7.918,2.474,14.797,3.299,20.459,3.299c11.059,0,17.469-3.153,17.864-3.354l0.785-0.397h0.084V57.833   C60.688,49.536,53.938,42.785,45.641,42.785z M65.084,30.653h-9.895c-0.107,3.959-1.797,7.524-4.47,10.088   c7.375,2.193,12.771,9.032,12.771,17.11v3.758c9.77-0.358,15.4-3.127,15.771-3.313l0.785-0.398h0.084V45.699   C80.13,37.403,73.38,30.653,65.084,30.653z M20.035,29.853c2.299,0,4.438-0.671,6.25-1.814c0.576-3.757,2.59-7.04,5.467-9.276   c0.012-0.22,0.033-0.438,0.033-0.66c0-6.491-5.262-11.752-11.75-11.752c-6.492,0-11.752,5.261-11.752,11.752   C8.283,24.591,13.543,29.853,20.035,29.853z M30.589,40.741c-2.66-2.551-4.344-6.097-4.467-10.032   c-0.367-0.027-0.73-0.056-1.104-0.056h-9.971C6.75,30.653,0,37.403,0,45.699v12.197l0.031,0.188l0.84,0.265   c6.352,1.983,12.021,2.897,16.945,3.185v-3.683C17.818,49.773,23.212,42.936,30.589,40.741z"/>
                    </g>
                </svg>
                Users
            </button>
            <button class="nav-button" onclick={(e) => {pageData.currentPageIndex = 2}} class:active={pageData.currentPageIndex === 2}>
              <svg class="nav-icon" fill="#000000" version="1.1" id="Layer_1" viewBox="0 0 512 512" xml:space="preserve">
              <g>
                <g>
                  <path d="M369.44,0H141.889C97.971,0,62.578,36.182,62.578,80.108v352.675c0,43.927,35.393,79.217,79.311,79.217H369.44    c43.917,0,79.982-35.29,79.982-79.217V80.108C449.422,36.182,413.357,0,369.44,0z M426.667,432.783    c0,31.379-25.857,56.461-57.227,56.461H141.889c-31.371,0-56.556-25.082-56.556-56.461V80.108    c0-31.379,25.185-57.353,56.556-57.353H369.44c31.37,0,57.227,25.973,57.227,57.353V432.783z"/>
                </g>
              </g>
              <g>
                <g>
                  <rect x="153.6" y="56.889" width="204.8" height="22.756"/>
                </g>
              </g>
              <g>
                <g>
                  <path d="M153.6,170.667h-11.378c-6.283,0-11.378,5.094-11.378,11.378V204.8c0,6.283,5.094,11.378,11.378,11.378H153.6    c6.283,0,11.378-5.094,11.378-11.378v-22.756C164.978,175.761,159.883,170.667,153.6,170.667z"/>
                </g>
              </g>
              <g>
                <g>
                  <path d="M153.6,273.067h-11.378c-6.283,0-11.378,5.094-11.378,11.378V307.2c0,6.283,5.094,11.378,11.378,11.378H153.6    c6.283,0,11.378-5.094,11.378-11.378v-22.756C164.978,278.161,159.883,273.067,153.6,273.067z"/>
                </g>
              </g>
              <g>
                <g>
                  <path d="M153.6,375.467h-11.378c-6.283,0-11.378,5.094-11.378,11.378V409.6c0,6.283,5.094,11.378,11.378,11.378H153.6    c6.283,0,11.378-5.094,11.378-11.378v-22.756C164.978,380.561,159.883,375.467,153.6,375.467z"/>
                </g>
              </g>
              <g>
                <g>
                  <rect x="199.111" y="182.044" width="182.044" height="22.756"/>
                </g>
              </g>
              <g>
                <g>
                  <rect x="199.111" y="284.444" width="182.044" height="22.756"/>
                </g>
              </g>
              <g>
                <g>
                  <rect x="199.111" y="386.844" width="182.044" height="22.756"/>
                </g>
              </g>
              </svg>
               Records
            </button>
            <button class="nav-button" onclick={(e) => {pageData.currentPageIndex = 3}} class:active={pageData.currentPageIndex === 3}>
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path fill="currentColor" d="M12 4a4 4 0 0 1 4 4a4 4 0 0 1-4 4a4 4 0 0 1-4-4a4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/>
                </svg>
                Profile
            </button>
        </nav>
    </div>
</div>

<style>
    :global(*) {
        font-family: 'Inter';
        box-sizing: border-box;
        user-select: none;
        touch-action: manipulation;
    }

    .app-container {
        display: flex;
        flex-direction: column;
        background-color: #f5fdfc;
        height: 100%;
        width: 100%;
    }

    .header {
        display: flex;
        background: var(--primary-color);
        justify-content: left;
        align-items: center;
        gap: 2%;
        color: white;
        padding: 1rem;
        width: 100%;
        box-shadow: 0 2px 8px rgba(7, 84, 95, 0.2);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
    }

    .header h1 {
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.8rem;
        font-weight: 600;
        letter-spacing: 0.5px;
    }

    .main-content {
        display: flex;
        flex: 1;
        padding: 5rem 1rem 4rem;
        z-index: 1;
        height: 100%;
        width: 100%;
    }

    .nav-div {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: white;
        box-shadow: 0 -2px 10px rgba(7, 84, 95, 0.1);
        border-top: 2px solid #d1e8ec;
        z-index: 2;
    }

    .nav-bar {
        display: flex;
        justify-content: space-around;
        padding: 0.5rem 0;
    }

    .nav-bar button {
        display: inline-block;
        color: rgb(147, 179, 138);
        text-decoration: none;
        padding: 0.5rem 0.7rem;
        background-color: transparent;
        border-radius: 20px;
        border-width: 0;
        transition: all 0.3s ease;
        font-weight: 500;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.3rem;
        position: relative;
    }

    .nav-bar button.active {
        color: #035257;
        background-color: #f0f9fb;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    }

    .nav-bar button.active::after {
        content: '';
        width: 4px;
        height: 4px;
        background-color: #3b9c91;
        border-radius: 50%;
        position: absolute;
        bottom: 5px;
    }

    /* .nav-bar button:hover {
        color: #4e9ed1;
        transform: translateY(-2px);
    } */

    .nav-icon {
        width: 24px;
        height: 24px;
        fill: currentColor;
    }

    :global(body) {
        margin: 0;
        padding: 0;
        min-height: 100vh;
    }
</style>
